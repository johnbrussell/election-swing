Based on the Split Ticket article: split-ticket.org/2022/06/06/where-do-trends-favor-each-party/

I do a couple things differently from Split Ticket.

First, to calculate expected votes, I scale up using the difference in votes nationally, rather than on a state-by-state basis.

Second, I also consider the difference in percentage results on a national basis.  That is, after scaling the total number of votes by the difference in votes nationally, I reassign some voters to the other party's expected pool.  If the nation swings right between elections, then I'll move a constant percentage of D voters into the R column for all counties that is equal to the swing the nation experienced (vice versa for a swing to the left).

The point of this exercise remains unchanged from the Split Ticket version.  It is that population growth matters in addition to percentage results.  Put another way, the nation's population is increasing, as is that of most states, so a hypothetical small county that sees 900 R votes and 100 D votes in one election and 811 R votes and 89 D votes in the next election is potentially trending in a direction much more helpful to Ds (assuming a constant electoral environment) because Rs' margin of victory shrinks from 800 to 722 even as it increases from 90% to 90.1%.

The data used is a self-cleaned version of the MIT Election Data and Science Lab dataset, "County Presidential Election Returns 2000-2020", available at https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/VOQCHQ.
